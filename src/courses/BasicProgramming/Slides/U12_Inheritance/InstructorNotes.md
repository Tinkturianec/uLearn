# Аудиторные практики

1. "Корневой сумматор". Пусть дан массив чисел A длины N. 
	Нужно уметь отвечать на запросы вида "какова сумма элементов с i по j?"
	Можно использовать o-малое(N) дополнительной памяти и потратить O(N) времени на подготовку к обработке запросов.
	Отвечать на запрос нужно за о-малое(N).

	* Обсудить сложность тривиального решения. (O(N) на каждый запрос)
	* Обсудить решение, без ограничения о-малое(N) на дополнительную память. 
	(Посчитаем заранее все частичные суммы A и будем отвечать на запросы за O(1))
	* Обсудить, какие бывают функции о-малое(N) (логарифм, корень, константа)

	Решение:

	Разбить массив на sqrt(N) групп, и заранее подсчитать суммы в этих группах и сохранить в дополнительном массиве.
	Тогда для ответа на запрос придется найти все группы, которые целиком попали в диапазон (за O(sqrt(N)) 
	и добавить к ним сумму левого и правого хвоста, (в каждом менее sqrt(N) элементов).
	Итого, сложность O(3*sqrt(N))

	При объяснении лучше, чтобы корень появился в самом конце. Отталкиваться можно от идеи "разобьем на несколько частей".
	А уже в конце посчитать на сколько частей бить оптимальнее всего.

2. Та же задача, с такими отличиями:

	появляются запросы на изменение i-ой ячейки массива.
	оба вида запросов должны обрабатываться за O(log(N))
	можно использовать O(N) дополнительной памяти и O(N) времени на подготовку.
	
	Решение. Дерево отрезков.
	Дерево бинарное. В корне дерева храним сумму на всем массиве, на втором уровне — суммы на двух его половинах, на третьем уровне — суммы на четырех четвертинах и т.д.
	
	Какие функции могут быть кроме суммы? min, max, 
	Эффективная реализация дерева на массиве, как в хипе. tree[1] — корень, tree[2n], tree[2n+1] — дети узла tree[n].
	
3. Пусть массив теперь двумерный, а запросы на сумму теперь на прямоугольные области в этом массиве.

	Решение: аналогично — квадродерево. На первом уровне сумма всей матрицы, на втором — четыре суммы четырех ее подматриц и т.д.
	Какова будет сложность?
	
	Решение 2: корневой сумматор. Разбить на P прямоугольников, для каждого из которых запомнить сумму.
	Чему должно быть равно P?
	
	Решение 3 (сложное): дерево отрезков по координате X, значением которого является дерево отрезков по Y координате. 
	См. многомерный случай [на e-maxx](http://e-maxx.ru/algo/segment_tree)
	
